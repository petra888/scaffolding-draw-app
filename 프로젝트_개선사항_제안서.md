# 시스템비계 드로잉 앱 - 프로젝트 개선사항 제안서

## 📋 현재 상태 점검

### ✅ 구현 완료된 기능
1. **스마트 2D 도면 작성**
   - 시스템비계 표준 규격 자동 적용 (293mm ~ 1817mm)
   - 터치 기반 드로잉
   - 직선/직각 그리기 모드
   - 자석 기능 (끝점 자동 연결)

2. **모바일 최적화**
   - 터치 좌표 정확도 개선
   - 핀치 줌 제스처
   - 도구 툴 크기 조절
   - 반응형 UI

3. **기본 편집 기능**
   - 선 삭제 (드래그 방식)
   - 전체 지우기
   - 화면 이동 (팬)
   - 전체 보기

### ❌ 미구현 핵심 기능
1. **수량 산출 기능** (PRD 핵심 요구사항)
2. **프로젝트 저장/관리**
3. **부재 라이브러리 활용**
4. **객체 기반 편집**

## 🔧 개선사항 제안

### 1. 프로젝트 구조 개선

#### 1.1 폴더 구조 재구성
```
src/
├── components/           # UI 컴포넌트
│   ├── canvas/          # 캔버스 관련
│   ├── toolbar/         # 툴바 관련
│   ├── palette/         # 팔레트 관련
│   └── reports/         # 리포트 관련 (신규)
├── features/            # 기능별 모듈 (신규)
│   ├── drawing/         # 드로잉 로직
│   ├── quantity/        # 수량 산출 로직
│   └── project/         # 프로젝트 관리
├── types/               # TypeScript 타입 정의 (신규)
├── utils/               # 유틸리티 함수 (신규)
├── hooks/               # 커스텀 훅 (신규)
└── services/            # API 및 저장소 서비스 (신규)
```

#### 1.2 타입 정의 강화
```typescript
// src/types/scaffold.ts
export interface ScaffoldMaterial {
  id: string;
  type: 'vertical' | 'horizontal' | 'diagonal' | 'platform' | 'clamp';
  length: number; // mm
  quantity: number;
  standardSize: boolean;
}

export interface Project {
  id: string;
  name: string;
  site: string;
  createdAt: Date;
  updatedAt: Date;
  drawing: DrawingData;
  materials: ScaffoldMaterial[];
}
```

### 2. 핵심 기능 구현 제안

#### 2.1 실시간 수량 산출 기능
```typescript
// src/components/QuantityPanel.tsx (신규)
interface QuantityPanelProps {
  strokes: Stroke[];
  scaffoldStructures: ScaffoldStructure[];
  supportPosts: SupportPost[];
}

const QuantityPanel: React.FC<QuantityPanelProps> = ({ ... }) => {
  // 자재별 수량 자동 계산
  // 실시간 업데이트
  // 리포트 미리보기
};
```

#### 2.2 프로젝트 관리 기능
```typescript
// src/services/projectService.ts (신규)
export class ProjectService {
  // 로컬스토리지 저장/불러오기
  saveProject(project: Project): void;
  loadProject(id: string): Project;
  listProjects(): Project[];
  exportToImage(): Blob;
  exportToPDF(): Blob;
}
```

#### 2.3 ComponentPalette 활성화
```typescript
// ComponentPalette와 DrawingCanvas 연동
// Drag & Drop 구현
// 부재별 그리기 모드 추가
```

### 3. UI/UX 개선사항

#### 3.1 Toolbar 재구성
- 프로젝트 관리 버튼 추가 (저장, 불러오기, 새 프로젝트)
- 내보내기 버튼 추가 (이미지, PDF, 수량표)
- 수량 보기 토글 버튼

#### 3.2 새로운 패널 추가
- **수량 패널**: 화면 우측에 실시간 수량 표시
- **프로젝트 정보**: 프로젝트명, 현장명, 날짜 표시

#### 3.3 모바일 UI 최적화
- 수량 패널 슬라이드 방식
- 하단 부품 팔레트 스와이프 개선

### 4. 데이터 관리 개선

#### 4.1 상태 관리 개선
```typescript
// Context API 또는 Redux 도입 고려
interface AppState {
  project: Project;
  drawing: DrawingState;
  ui: UIState;
  quantity: QuantityState;
}
```

#### 4.2 저장 형식 정의
```typescript
interface SaveData {
  version: string;
  project: Project;
  drawing: {
    strokes: Stroke[];
    structures: ScaffoldStructure[];
    posts: SupportPost[];
  };
  materials: MaterialSummary;
}
```

### 5. 성능 최적화

#### 5.1 Canvas 렌더링 최적화
- 불필요한 재렌더링 방지
- 레이어 분리 (격자, 그림, UI)
- requestAnimationFrame 활용

#### 5.2 메모리 관리
- 대용량 프로젝트 처리
- 이미지 압축
- 오래된 데이터 정리

### 6. 추가 기능 제안

#### 6.1 고급 드로잉 기능
- 복사/붙여넣기
- 그룹 선택
- 정렬 도구
- 측정 도구

#### 6.2 비즈니스 기능
- 견적서 연동
- 재고 관리 연동
- 작업 지시서 생성

## 📅 구현 우선순위

### Phase 1 (1주) - 핵심 기능
1. **수량 산출 패널 구현**
   - 실시간 자재 집계
   - 수량 표시 UI

2. **프로젝트 저장/불러오기**
   - 로컬스토리지 활용
   - 기본 프로젝트 관리

### Phase 2 (1주) - 데이터 관리
1. **타입 시스템 강화**
   - types 폴더 생성
   - 인터페이스 정의

2. **ComponentPalette 연동**
   - 부재별 그리기 모드
   - Drag & Drop 기능

### Phase 3 (1주) - 내보내기
1. **이미지 내보내기**
   - Canvas to Image
   - 다운로드 기능

2. **수량표 내보내기**
   - CSV/Excel 형식
   - PDF 리포트

### Phase 4 (2주) - 고급 기능
1. **객체 편집 기능**
   - 선택/이동/복사
   - 속성 변경

2. **클라우드 연동 준비**
   - API 설계
   - 인증 시스템

## 💡 즉시 적용 가능한 개선사항

### 1. package.json 업데이트
```json
{
  "name": "easy-scaff-d",
  "version": "0.2.0",
  "description": "시스템 비계 2D 도면 작성 및 수량 산출 모바일 앱"
}
```

### 2. 앱 제목 변경
- "시스템비계 드로잉" → "Easy Scaff-d"

### 3. README.md 생성
- 프로젝트 소개
- 기능 목록
- 사용 방법
- 개발 가이드

### 4. 타입 정의 파일 분리
- DrawingCanvas의 인터페이스들을 별도 파일로
- 재사용 가능한 타입 정의

### 5. 컴포넌트 리팩토링
- DrawingCanvas.tsx 분할 (1160줄 → 여러 파일로)
- 커스텀 훅 추출

이러한 개선사항들을 단계적으로 적용하면 PRD에서 요구하는 완성도 높은 제품으로 발전할 수 있을 것입니다. 